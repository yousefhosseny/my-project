
# **يعني إيه DNS Enumeration؟**

ببساطة، أي موقع على الإنترنت بيكون عنده **نطاق رئيسي (Domain)** زي `example.com`، لكن ممكن يكون عنده **نطاقات فرعية (Subdomains)** زي:

- `mail.example.com` → خاص بالبريد الإلكتروني
- `admin.example.com` → لوحة تحكم ممكن تكون غير محمية كويس
- `dev.example.com` → سيرفر خاص بالتطوير وممكن يكون فيه أخطاء

إنت في **اختبار الاختراق** (Pentesting) محتاج تعرف النطاقات الفرعية دي لأنها ممكن تكون **نقطة دخول ضعيفة** تخليك توصل للهدف بسهولة.

---

# **إزاي DNS بيشتغل أصلاً؟**

لما تكتب `www.example.com` في المتصفح، بيحصل الآتي:

1. المتصفح بيسأل **DNS Server** عن عنوان الـ IP الخاص بالموقع.
2. الـ DNS Server بيرد بعنوان الـ IP، وليكن `192.168.1.1`.
3. المتصفح بيروح للـ IP ده ويعرض لك الموقع.

طيب، إنت بقى كمختبر اختراق، ممكن تستغل الكلام ده علشان تكتشف **نطاقات فرعية** مرتبطة بالموقع المستهدف.

### **الخلاصة لحد هنا:**

ال DNS شغال زي دليل التليفونات، لما تكتب اسم موقع بيجيب لك عنوانه، وإنت كمهاجم تقدر تدور على **النطاقات الفرعية** لأنها ممكن توصلك لنقطة ضعف في النظام.

---

# **طرق اكتشاف النطاقات الفرعية (DNS Enumeration Techniques)**

## **1️⃣ - Brute Force (التخمين العنيف)**

الطريقة دي بتعتمد على إنك تجرب **كلمات شائعة** للنطاقات الفرعية وتشوف إيه اللي موجود فعلاً.  
🛠 **الأدوات المستخدمة:**

- **[[Gobuster]]**
- **[[Sublist3r]]**
- **[[Amass]]**

#### **مثال عملي باستخدام Sublist3r:**

1. افتح **Kali Linux** أو أي نظام عندك.
2. اكتب الأمر ده في التيرمنال:
    
    ```bash
    sublist3r -d example.com
    ```
    
3. هيبدأ يجرب أسماء كتير زي `admin.example.com`، `dev.example.com` وهكذا.

### **الخلاصة:**

دي طريقة تعتمد على التجربة والتخمين باستخدام قائمة جاهزة فيها أسماء شائعة للنطاقات الفرعية.

---

## **2️⃣ - Passive Enumeration (البحث بدون ما الموقع يحس بيك)**

في الطريقة دي، بدل ما تسأل الموقع مباشرة، بتستخدم **مصادر خارجية** عندها بيانات عن النطاقات الفرعية المسجلة قبل كده.  
🛠 **المواقع المستخدمة:**

- **[crt.sh](https://crt.sh])**
- **[VirusTotal](https://www.virustotal.com/gui/home/upload)**
- **[SecurityTrails](https://securitytrails.com/)**

#### **مثال عملي باستخدام crt.sh:**

1. ادخل على موقع: [https://crt.sh](https://crt.sh/)
2. اكتب `example.com` واضغط **بحث**.
3. هتشوف كل النطاقات الفرعية اللي اتسجلت قبل كده في الشهادات الأمنية (SSL Certificates).

### **الخلاصة:**

دي طريقة هادية وبتجيب معلومات بدون ما الموقع يحس إنك بتهاجمه.

---

### **3️⃣ - استخدام أدوات متخصصة**

فيه أدوات بتجمع بين الطرق السابقة وتجيب لك نتائج دقيقة.  
🛠 **أهم الأدوات:**

- **[[Amass]]**
- **[[subfinder]]**
- **[[assetfinder]]**

#### **مثال عملي باستخدام amass:**

1. افتح التيرمنال واكتب:
    
    ```bash
    amass enum -d example.com
    ```
    
2. استنى شوية، وهتلاقيه جاب لك كل النطاقات الفرعية اللي قدر يكتشفها.

### **الخلاصة:**

الأدوات دي بتجمع بين كذا تقنية علشان تطلع بنتائج قوية ودقيقة.

---

## **الخطوات العملية لاختبار اختراق الويب (Web Pentesting Workflow)**

بعد ما تكتشف النطاقات الفرعية، تعمل إيه؟ 🤔

### **1️⃣ - جمع المعلومات (Reconnaissance)**

🔹 استخدم أدوات زي:

- [[WHOIS]] لمعرفة صاحب الدومين
- [[Nslookup]]` أو `dig` لجلب بيانات DNS
- [[WhatWeb]]` أو `wafw00f` لمعرفة تقنيات الموقع

📌 **مثال باستخدام whatweb:**

```bash
whatweb example.com
```

📌 **مثال باستخدام dig:**

```bash
dig example.com any
```

### **2️⃣ - فحص المنافذ والخدمات (Port Scanning & Service Enumeration)**

🔹 استخدم **[[Nmap]]** لتحديد المنافذ المفتوحة والخدمات:

```bash
nmap -A example.com
```

### **3️⃣ - البحث عن الثغرات (Vulnerability Scanning)**

🔹 استخدم **[[Nikto]]** لفحص ثغرات الويب:

```bash
nikto -h example.com
```

🔹 استخدم **Burp Suite** لفحص المدخلات والطلبات في الموقع.

### **4️⃣ - تجربة استغلال الثغرات (Exploitation & Gaining Access)**

- حاول تجربة **SQL Injection**، **XSS**، أو **LFI** حسب نتائج الفحص.
- جرب أدوات زي **[[SQLmap]]** و **[[XSStrike]]**.

📌 **مثال على SQL Injection باستخدام sqlmap:**

```bash
sqlmap -u "http://example.com/product.php?id=1" --dbs
```

### **5️⃣ - الحفاظ على الوصول (Maintaining Access) & إعداد التقرير (Reporting)**

بعد ما توصل لثغرة، بتثبت نفسك داخل النظام وتجهز **تقرير احترافي** بالثغرات اللي اكتشفتها.

---

## **الخلاصة النهائية 🔥**

📌 ال**DNS Enumeration** هو البحث عن النطاقات الفرعية لموقع معين لأنها ممكن تكون نقطة ضعف.  
📌 **طرق البحث عن النطاقات الفرعية:**

1. **Brute Force** باستخدام أدوات زي **[[Gobuster]]** و **Sublist3r**.
2. **Passive Enumeration** باستخدام مواقع زي **crt.sh**.
3. **استخدام أدوات متخصصة** زي **amass** و **subfinder**.  
    📌 **بعد اكتشاف النطاقات الفرعية، تبدأ في اختبار الاختراق بخطوات عملية:**
4. **جمع المعلومات (Recon).**
5. **فحص المنافذ والخدمات.**
6. **البحث عن الثغرات.**
7. **استغلال الثغرات للوصول للنظام.**
8. **إعداد تقرير محترف بالنتائج.**
