# **🛠️ تحديد نظام التشغيل والخدمات (OS & Service Enumeration) بأبسط وأعمق شرح ممكن**

---

## **📌 يعني إيه تحديد نظام التشغيل والخدمات؟**

لما بتتعامل مع سيرفر أو جهاز مستهدف، مهم تعرف هو شغال على **Windows ولا Linux؟** وإيه هي **الخدمات اللي بيشغلها (زي HTTP, SSH, FTP, SMB، إلخ)؟** لأن كل نظام تشغيل وخدمة ليها **ثغرات خاصة بيها**، ولو عرفت التفاصيل دي، هتقدر تستغلها صح! 😈

🎯 **أهداف التعداد (Enumeration):**  
✅ تحديد نظام التشغيل (OS Fingerprinting).  
✅ تحديد الخدمات والبورتات المفتوحة.  
✅ معرفة إصدارات الخدمات اللي شغالة على السيرفر.

---

## **1️⃣ - تحديد نظام التشغيل (OS Detection) باستخدام Nmap 🔎**

أداة **[[Nmap]]** قوية جدًا في تحليل ردود الجهاز لمعرفة نوع نظام التشغيل، وده عن طريق **TCP/IP Fingerprinting**.

🔹 **الأمر الأساسي لتحديد الـ OS:**

```bash
nmap -O <IP>
```

🎯 **النتيجة المتوقعة:**

```
OS: Linux 5.4 - 5.11
```

🔥 كده عرفت إن الجهاز شغال **Linux**، يبقى تدور على ثغرات تخصه.

---

### **📌 طيب لو النظام رفض يرد؟ جرب الحيل دي:**

🔹 **استخدم Stealth Scan**:

```bash
nmap -sS -O <IP>
```

ده بيفحص الجهاز بطريقة خفيفة عشان ميكشفش نفسه بسهولة.

🔹 **استخدام TCP/IP Stack Fingerprinting مع Xprobe2:**

```bash
xprobe2 -v <IP>
```

ده بيستخدم تكنيكات مختلفة لو Nmap مش جايب نتيجة.

---

## **🔥 الخلاصة بالعامية 🔥**

✅ عشان تعرف الجهاز Windows ولا Linux، استخدم:

```bash
nmap -O <IP>
```

✅ لو الجهاز مش بيرد، جرب:

```bash
nmap -sS -O <IP>
```

✅ أو استخدم:

```bash
xprobe2 -v <IP>
```

🚀 **كده أنت عرفت نظام التشغيل، نخش بقى على الخدمات اللي شغالة!**

---

## **2️⃣ - تحديد الخدمات والبورتات المفتوحة (Service Enumeration) 🔍**

📌 أي جهاز متصل بالشبكة بيكون عنده **خدمات (Services)** زي **HTTP (ويب)، SSH (تحكم عن بعد)، FTP (نقل ملفات)، SMB (مشاركة ملفات على ويندوز)**، لازم نعرف إيه الشغال منها وإصداراتها.

🔹 **أفضل أمر لفحص الخدمات وإصداراتها هو:**

```bash
nmap -sV <IP>
```

🎯 **النتيجة المتوقعة:**

```
22/tcp  open  ssh     OpenSSH 8.2p1
80/tcp  open  http    Apache 2.4.41
445/tcp open  smb     Windows Server 2019
```

🔥 **دلوقتي عرفت إن الجهاز عليه:**

- **SSH بإصدار OpenSSH 8.2p1** 🛠️
- **سيرفر ويب Apache 2.4.41** 🌍
- **SMB شغال على Windows Server 2019** 💻

🛑 **ليه ده مهم؟**  
✅ لو لقيت إصدار خدمة معين، ممكن تبحث عن ثغراته (مثلاً Apache 2.4.41 عنده ثغرات RCE).

---

### **📌 حيل تانية لو الـ Nmap مش كفاية؟**

🔹 **استخدم Netcat عشان تتصل ببورت معين وتشوف نوع الخدمة يدويًا:**

```bash
nc -v <IP> 80
```

🎯 لو طلع لك:

```
Apache 2.4.41
```

يبقى ده سيرفر **Apache** وده معناه إنه Linux.

🔹 **استخدم Enum4Linux لو الجهاز Windows وبيشغل SMB:**

```bash
enum4linux <IP>
```

🎯 هيساعدك تعرف يوزرات الـ SMB، والـ Shares المتاحة.

---

## **🔥 الخلاصة بالعامية 🔥**

✅ استخدم **Nmap** عشان تعرف الخدمات والإصدارات:

```bash
nmap -sV <IP>
```

✅ استخدم **Netcat** لو عايز تجرب يدويًا:

```bash
nc -v <IP> 80
```

✅ استخدم **[[Enum4Linux]]** لو بتتعامل مع سيرفر ويندوز:

```bash
enum4linux <IP>
```

🚀 **دلوقتي أنت عرفت نظام التشغيل والخدمات اللي شغالة، نبدأ ندور على الثغرات!** 🔥💀

---

## **🔍 خطوات عملية لـ Web Penetration Testing 🚀**

### **1️⃣ - جمع المعلومات (Reconnaissance)**

- استخدم **Whois، DNS Enumeration، Subdomain Enumeration**.
- أدوات: `whois, dig, Sublist3r`.

### **2️⃣ - فحص الثغرات (Scanning & Enumeration)**

- فحص المنافذ باستخدام `nmap -sV -O <IP>`.
- تحليل صفحات تسجيل الدخول (User Enumeration).

### **3️⃣ - تجربة اختراق تسجيل الدخول (Brute Force)**

- استخدام `Hydra` أو `Burp Suite Intruder` لاختبار كلمات المرور.

### **4️⃣ - استغلال الثغرات (Exploitation)**

- تجربة **SQL Injection، XSS، LFI، RCE**.
- أدوات: `SQLmap, XSSer, Metasploit`.

### **5️⃣ - تصعيد الصلاحيات (Privilege Escalation)**

- البحث عن الملفات الحساسة وصلاحيات المستخدمين.
- أدوات: `LinPEAS, WinPEAS`.

### **6️⃣ - السيطرة النهائية (Post Exploitation)**

- استخراج البيانات المهمة، زرع **Backdoor**، والتحكم الكامل في الموقع.

🚀 **دي الخطة الكاملة لاختبار اختراق أي موقع! 🔥💀**