## 🔥 **طرق تجاوز جدران الحماية أثناء الفحص (Firewall Evasion Techniques) - شرح شامل ومبسط** 🔥

### ✅ **ما هو جدار الحماية (Firewall)؟**

جدار الحماية هو نظام أمني يقوم **بتصفية** حركة المرور (Traffic) وفقًا لمجموعة من القواعد الأمنية لمنع **الاتصالات غير المصرح بها**.

💡 **مثال:** تخيل أن جدار الحماية يشبه **حارس أمني** أمام باب مبنى، يحدد من يمكنه الدخول بناءً على قائمة المسموح لهم.

---

## 🔍 **أنواع جدران الحماية وكيف تعمل**

### 🔹 **1. جدران الحماية القائمة على الفلترة (Packet Filtering)**

📌 تقوم بفحص كل **حزمة بيانات (Packet)** على حدة بناءً على:

- **المصدر (Source IP)**
- **الوجهة (Destination IP)**
- **المنفذ (Port)**
- **البروتوكول المستخدم (Protocol مثل TCP/UDP)**

**🛑 العيب:** لا تحتفظ بمعلومات عن الجلسات السابقة، لذا يمكن خداعها بسهولة!

---

### 🔹 **2. جدران الحماية ذات الحالة (Stateful Firewalls)**

📌 تتابع الجلسات النشطة وتسمح فقط بالحزم التي تنتمي لجلسة مشروعة.

**🛑 العيب:** يمكن خداعها باستخدام **جلسات وهمية** لإرسال بيانات غير مشبوهة.

---

### 🔹 **3. جدران الحماية على مستوى التطبيق (Application Layer Firewalls)**

📌 تقوم بتحليل حركة المرور على مستوى التطبيقات مثل:

- HTTP
- FTP
- SMTP

**🛑 العيب:** يمكن تجاوزها **بتغيير توقيعات حركة المرور** لتبدو شرعية.

---

### 🔹 **4. أنظمة كشف التسلل (IDS) ومنع التسلل (IPS)**

📌 تقوم بمراقبة الشبكة لاكتشاف الهجمات ومنعها قبل أن تصل إلى الهدف.

**🛑 العيب:** يمكن تجاوزها باستخدام **تقنيات التمويه والتشفير**.

---

## ⚠️ **لماذا نحتاج إلى تجاوز جدار الحماية أثناء الفحص؟**

- جدران الحماية **تحجب الفحص العادي** مما يمنع اكتشاف الخدمات والمنافذ المفتوحة.
- تمنع الوصول إلى بعض المنافذ الحساسة مثل **22 (SSH) أو 3389 (RDP)**.
- تحتاج إلى تقنيات **إخفاء الفحص** لجمع المعلومات دون كشف هويتك.

---

# 🚀 **طرق تجاوز جدران الحماية أثناء الفحص (Firewall Evasion Techniques)**

## 🔎 **1️⃣ استخدام الفحص المخفي (Stealth Scan)**

📌 يستخدم **[[Nmap]]** طريقة TCP SYN لإخفاء الفحص:

```bash
nmap -sS target.com
```

✅ هذا الفحص لا يُتم الاتصال بالكامل، مما يقلل فرص كشفه.

**📌 الخلاصة:** هذه الطريقة **تخدع جدران الحماية البسيطة** التي تعتمد على جلسات TCP الكاملة.

---

## 🔎 **2️⃣ استخدام تجزئة الحزم (Fragmented Packets)**

📌 يتم تقسيم البيانات إلى **أجزاء صغيرة** لتجنب كشفها:

```bash
nmap -f target.com
```

✅ بعض جدران الحماية لا تستطيع **إعادة تجميع الحزم الصغيرة**، مما يسمح بتمرير الفحص.

**📌 الخلاصة:** هذه الطريقة مفيدة **للتلاعب بالفلاتر البدائية** التي لا تتعامل مع الحزم المجزأة جيدًا.

---

## 🔎 **3️⃣ تغيير توقيت الفحص لتقليل الشبهات**

📌 يمكن تغيير سرعة الفحص لتجنب اكتشافه:

```bash
nmap -T2 target.com
```

✅ يقلل هذا من **عدد الحزم المرسلة في الثانية**، مما يجعله يبدو كحركة عادية.

**📌 الخلاصة:** هذه الطريقة **فعالة ضد أنظمة كشف التسلل (IDS) التي تعتمد على النشاط المفرط لكشف الفحص**.

---

## 🔎 **4️⃣ انتحال عنوان IP (IP Spoofing)**

📌 يتم إرسال الفحص باستخدام **عناوين IP مزيفة**:

```bash
nmap -D RND:10 target.com
```

✅ يتم استخدام **10 عناوين IP عشوائية** لإخفاء المصدر الحقيقي.

**📌 الخلاصة:** هذه الطريقة **تضلل سجلات الأمان** وتجعل تتبعك أكثر صعوبة.

---

## 🔎 **5️⃣ تغيير هوية الجهاز (MAC Address Spoofing)**

📌 يمكن تغيير **عنوان MAC** لمحاكاة جهاز مختلف:

```bash
nmap --spoof-mac 00:11:22:33:44:55 target.com
```

✅ هذا يساعد في **تجاوز الفلاتر التي تعتمد على عناوين MAC**.

**📌 الخلاصة:** هذه الطريقة **مفيدة عند الفحص داخل الشبكات المحلية (LAN)** حيث يعتمد جدار الحماية على تصفية MAC.

---

## 🔎 **6️⃣ استخدام بروتوكولات بديلة (UDP / ICMP)**

📌 إذا كان **جدار الحماية يحجب فحص TCP**، يمكن استخدام بروتوكولات أخرى:

```bash
nmap -sU target.com
```

✅ بعض الجدران تسمح بحركة UDP، مما يساعد في اكتشاف المنافذ المخفية.

**📌 الخلاصة:** هذه الطريقة **تعمل عندما يكون جدار الحماية يسمح بحركة مرور بروتوكولات معينة فقط**.

---

## 🔎 **7️⃣ استغلال المنافذ المفتوحة مثل 443 (HTTPS)**

📌 يمكن استخدام **المنافذ المسموح بها** للفحص، مثل 443:

```bash
nmap -p 443 target.com
```

✅ بعض الجدران لا تحجب **حركة HTTPS**، مما يسمح بتمرير الفحص.

**📌 الخلاصة:** هذه الطريقة **مفيدة عندما تكون معظم المنافذ محجوبة باستثناء المنافذ الشائعة**.

---

# 🛠 **خطوات عملية لاختبار تجاوز جدار الحماية أثناء الفحص**

### ✅ **1️⃣ التحقق من وجود جدار حماية**

```bash
nmap -p 1-1000 target.com
```

➡️ إذا لم تظهر المنافذ المفتوحة، فقد يكون هناك **جدار حماية يمنع الفحص**.

---

### ✅ **2️⃣ تجربة الفحص المخفي (Stealth Scan)**

```bash
nmap -sS target.com
```

➡️ لمعرفة ما إذا كان الفحص المخفي قادرًا على كشف المنافذ المفتوحة.

---

### ✅ **3️⃣ تجربة تجزئة الحزم (Fragmentation)**

```bash
nmap -f target.com
```

➡️ إذا ظهرت منافذ جديدة، فهذا يعني أن الجدار لا يستطيع **إعادة تجميع الحزم الصغيرة**.

---

### ✅ **4️⃣ تجربة انتحال IP لإخفاء المصدر**

```bash
nmap -D RND:10 target.com
```

➡️ هذا يساعد في **إخفاء هوية الفاحص** وجعل التتبع صعبًا.

---

### ✅ **5️⃣ استغلال المنافذ المفتوحة (مثل 443)**

```bash
nmap -p 443 target.com
```

➡️ لمعرفة ما إذا كان يمكن استخدام المنافذ المسموح بها للوصول إلى الهدف.

---

## 🔥 **📌 الخلاصة النهائية**

✅ جدران الحماية تمنع الفحص العادي، لذا تحتاج إلى **تقنيات متقدمة** مثل:  
1️⃣ **الفحص المخفي (Stealth Scan) باستخدام -sS**.  
2️⃣ **تقسيم الحزم (Fragmentation) باستخدام -f**.  
3️⃣ **تغيير توقيت الفحص (Timing) باستخدام -T2**.  
4️⃣ **إخفاء الهوية باستخدام IP Spoofing و MAC Spoofing**.  
5️⃣ **استخدام بروتوكولات بديلة (UDP, ICMP) عند الحاجة**.  
6️⃣ **استغلال المنافذ المفتوحة مثل 443**.

🚀 **جرب هذه الأساليب في بيئة اختبار قانونية لتطوير مهاراتك في اختبار الاختراق!** 🚀