## **📌 شرح Checking for Exposed APIs and Enumerating API Endpoints بأسهل وأعمق طريقة**

---

### **🟢 1. ما معنى Exposed APIs and Endpoints؟**

🔹 المواقع والتطبيقات الحديثة تعتمد على **واجهات برمجة التطبيقات (APIs)** للتواصل بين الواجهة الأمامية والخلفية.  
🔹 الـ **API Endpoints** هي نقاط الوصول التي يمكن من خلالها إرسال واستقبال البيانات، مثل:

```plaintext
https://example.com/api/users
https://example.com/api/orders
https://example.com/api/admin
```

🔹 بعض هذه النقاط قد تكون مكشوفة **(Exposed)** على الإنترنت، مما قد يؤدي إلى تسريب بيانات حساسة أو وظائف يمكن استغلالها.

💡 **الخلاصة**: **Exposed APIs تعني نقاط API متاحة للعامة، والتي قد تحتوي على بيانات أو وظائف خطيرة.**

---

### **🟢 2. لماذا تعتبر Exposed APIs خطيرة؟**

1️⃣ **تسريب البيانات (Data Leakage)**:

- قد تكشف عن بيانات المستخدمين أو المنتجات بشكل غير مقصود.
- مثال: إذا كان هناك API مكشوف يعرض قائمة العملاء عند زيارته مثل:

```plaintext
https://example.com/api/customers
```

يمكن لأي شخص الوصول إلى هذه البيانات بدون تسجيل دخول!

2️⃣ **استغلال الوظائف (Functionality Exploitation)**:

- بعض APIs تسمح بتعديل البيانات مثل حذف المستخدمين أو تعديل الطلبات.
- إذا لم يكن هناك تحقق من الصلاحيات، فقد يتمكن المهاجم من تنفيذ إجراءات خطيرة.

3️⃣ **التخمين والاكتشاف (Brute Forcing & Discovery)**:

- المهاجمون يمكنهم تجربة مسارات API مختلفة حتى يعثروا على مسارات مخفية مثل:

```plaintext
/api/admin
/api/backup
/api/debug
```

💡 **الخلاصة**: **Exposed APIs يمكن أن تؤدي إلى تسريب بيانات أو اختراق الموقع إذا لم تكن محمية جيدًا.**

---

### **🟢 3. كيف نبحث عن API Endpoints؟ (Enumerating API Endpoints)**

#### **🔹 1. من خلال Network Requests في المتصفح**

✅ افتح **Developer Tools** في المتصفح (اضغط **F12**).  
✅ انتقل إلى **Network** ثم **Fetch/XHR**.  
✅ قم بتحديث الصفحة ولاحظ الطلبات التي يرسلها الموقع.  
✅ أي رابط يبدأ بـ `/api/` هو غالبًا نقطة API.

📌 **مثال عملي:**  
عند زيارة موقع متجر إلكتروني، قد تجد طلبات مثل:

```plaintext
/api/products
/api/cart
/api/user/profile
```

💡 **الخلاصة**: **يمكنك اكتشاف نقاط API من خلال تحليل الطلبات في المتصفح.**

---

#### **🔹 2. استخدام أدوات Crawling و Spidering**

🔹 بعض الأدوات تساعد في اكتشاف API Endpoints تلقائيًا:  
✅ **Burp Suite**: يمكنه تحليل جميع الطلبات الصادرة من الموقع وجلب جميع نقاط API.  
✅ **ZAP Proxy**: يعمل بنفس طريقة Burp Suite ويقوم بمسح شامل للروابط المخفية.  
✅ **Gobuster أو Dirb**: يمكن استخدامهم لمحاولة اكتشاف مسارات API غير المعروفة.

📌 **مثال على استخدام Gobuster:**

```bash
gobuster dir -u https://example.com -w /usr/share/wordlists/dirb/api.txt
```

💡 **الخلاصة**: **الأدوات التلقائية مثل Burp Suite و Gobuster يمكنها كشف API Endpoints المخفية.**

---

#### **🔹 3. البحث في ملفات الموقع عن API Endpoints**

🔹 بعض الملفات قد تحتوي على **روابط API مخفية** مثل:  
✅ **ملفات JavaScript**: قد تحتوي على استدعاءات API.  
✅ **ملف robots.txt**: قد يحتوي على مسارات محظورة ولكنها متاحة.  
✅ **ملف sitemap.xml**: قد يكشف عن روابط API مخفية.

📌 **مثال على البحث في JavaScript:**

1. افتح كود المصدر للموقع (**Ctrl + U**).
2. ابحث عن `/api/` باستخدام **Ctrl + F**.
3. قد تجد روابط API لم تكن مرئية في الواجهة.

💡 **الخلاصة**: **البحث في ملفات الموقع يمكن أن يكشف عن نقاط API لم تكن معروفة.**

---

### **🟢 4. كيف نحمي الموقع من Exposed APIs؟**

✅ **استخدم التحقق من الهوية والصلاحيات (Authentication & Authorization).**  
✅ **لا تعرض معلومات حساسة عبر API بدون تحقق.**  
✅ **حدد طلبات API بناءً على مستوى الصلاحيات (مثل: Admin فقط).**  
✅ **استخدم Web Application Firewall (WAF) لمنع الهجمات على API.**  
✅ **لا تترك API Debugging أو Development Endpoints متاحة في بيئة الإنتاج.**

💡 **الخلاصة**: **أفضل طريقة لحماية API هي تقليل الوصول غير المصرح به وتطبيق التحقق من الصلاحيات.**

---

## **🛠️ الخطوات العملية لاكتشاف API Endpoints بنفسك**

### **🔴 الطريقة اليدوية (باستخدام المتصفح فقط)**

✅ افتح الموقع.  
✅ اضغط على **F12** لفتح **Developer Tools**.  
✅ اذهب إلى **Network > Fetch/XHR** لرؤية جميع طلبات API.  
✅ ابحث عن أي مسار يبدأ بـ `/api/`.

### **🔵 الطريقة التلقائية (باستخدام الأدوات)**

✅ استخدم **Burp Suite Spider** لاكتشاف الروابط والطلبات.  
✅ جرب **Gobuster أو Dirb** للبحث عن مسارات API المخفية.  
✅ ابحث في ملفات **JavaScript و robots.txt و sitemap.xml** عن أي روابط API.

---

## **🔥 الخلاصة النهائية**

✅ **Exposed APIs هي نقاط API المتاحة للعامة، والتي قد تكون خطيرة إذا لم تكن محمية جيدًا.**  
✅ **Enumerating API Endpoints يعني البحث عن جميع نقاط API الممكنة في الموقع.**  
✅ **يمكنك استخدام Network Requests في المتصفح، أدوات Crawling، أو البحث في ملفات الموقع لاكتشاف هذه النقاط.**  
✅ **لحماية الموقع، تأكد من استخدام التحقق من الهوية والصلاحيات، وعدم كشف معلومات حساسة عبر API.**

💡 **الآن، جرب بنفسك واكتشف نقاط API في أي موقع! 🚀**