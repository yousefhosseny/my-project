### **📌 Crawling و Spidering + Identifying API Endpoints بأسهل وأعمق طريقة**

---

## **🟢 أولًا: فهم Crawling و Spidering**

### **1️⃣ ما هو Crawling؟**

التخيل البسيط:  
تخيل أنك دخلت مكتبة ضخمة وأردت معرفة جميع الكتب التي تحتويها. تبدأ من الباب الرئيسي، ثم تنتقل إلى الرفوف واحدًا تلو الآخر، وتأخذ قائمة بكل كتاب تراه. هذا هو مفهوم **Crawling** في الويب.

🔹 **Crawling في الويب**:

- أداة (مثل Burp Suite أو Googlebot) تبدأ من **رابط رئيسي** (Homepage).
- تتبع جميع **الروابط** الموجودة في الصفحة.
- تزحف إلى **الصفحات الجديدة** المكتشفة، وتكرر العملية.
- تستمر العملية حتى تصل إلى جميع الصفحات الممكنة على الموقع.

💡 **الخلاصة**: **Crawling هو عملية تتبع الروابط لاكتشاف جميع صفحات الموقع.**

---

### **2️⃣ ما هو Spidering؟**

🔹 **Spidering هو جزء من Crawling لكنه أعمق قليلًا:**

- بعض الأدوات لا تكتفي بتتبع الروابط، بل تقوم أيضًا **بإرسال بيانات**، أو **التفاعل مع الموقع** لاكتشاف مزيد من الصفحات المخفية.
- مثلًا، يمكن لـ Burp Suite Spider أن يملأ **النماذج** أو يجرب **روابط مخفية** لا يستطيع المستخدم العادي رؤيتها بسهولة.

💡 **الخلاصة**: **Spidering هو Crawling أكثر ذكاءً، حيث يتفاعل مع الموقع لاكتشاف صفحات غير مرئية بسهولة.**

---

## **🟢 ثانيًا: Identifying API Endpoints**

### **1️⃣ ما هي API Endpoints؟**

تخيل أن لديك **تطبيق طلب طعام** على هاتفك. عندما تضغط على زر "عرض الطلبات السابقة"، التطبيق لا يعرض البيانات بنفسه، بل يطلبها من السيرفر عن طريق **API**.  
🔹 هذا الطلب يتم إرساله إلى **Endpoint** مثل:

```plaintext
https://example.com/api/orders
```

🔹 هذا الرابط **(API Endpoint)** هو المكان الذي يُرسل التطبيق إليه البيانات أو يستقبلها منه.

💡 **الخلاصة**: **API Endpoints هي نقاط على السيرفر يمكننا إرسال طلبات لها للحصول على بيانات أو إرسال بيانات جديدة.**

---

### **2️⃣ كيف نكتشف API Endpoints؟**

📌 هناك طريقتان رئيسيتان:

#### **🔍 الطريقة 1: من خلال Network Requests في المتصفح**

1. افتح موقع الويب المستهدف.
2. اضغط على **F12** لفتح أدوات المطور (**Developer Tools**).
3. اذهب إلى تبويب **Network**، ثم إلى **Fetch/XHR** (لإظهار الطلبات إلى الـ API).
4. قم بتحديث الصفحة ولاحظ جميع **الطلبات التي يرسلها الموقع**.
5. ستجد بعض الروابط تحتوي على مسارات مثل:
    - `/api/login`
    - `/api/user/profile`
    - `/api/products/list`

🔹 **ماذا نستفيد؟**

- نعرف كيف يتواصل الموقع مع السيرفر.
- نعرف المسارات التي يمكننا اختبارها في الهجوم.

💡 **الخلاصة**: **باستخدام أدوات المتصفح، يمكننا رؤية طلبات API التي يستخدمها الموقع وتحديد نقاط الدخول الهامة.**

---

#### **🛠️ الطريقة 2: من خلال أدوات Crawling و Spidering**

بعض الأدوات المتخصصة مثل **Burp Suite، ZAP Proxy، Gobuster** يمكنها اكتشاف API Endpoints تلقائيًا:

1. تشغيل Burp Suite وتشغيل **Passive Scanning**.
2. استخدام **Active Scanning** لاختبار الاستجابات من السيرفر.
3. تحليل الطلبات والردود لمعرفة نقاط API المخفية.
4. استخدام Gobuster أو Dirb لمحاولة اكتشاف **Endpoints غير مكشوفة**.

🔹 **ماذا نستفيد؟**

- اكتشاف API Endpoints غير مرئية مباشرة في الموقع.
- معرفة النقاط التي يمكن استغلالها في الاختراق.

💡 **الخلاصة**: **يمكننا استخدام أدوات متقدمة لكشف API Endpoints بشكل تلقائي، حتى لو لم تكن واضحة في واجهة الموقع.**

---

## **🛠️ الخطوات العملية لاكتشاف API Endpoints بنفسك**

📌 **إذا كنت تريد تجربة ذلك بنفسك، اتبع الخطوات التالية:**

### **🔹 الطريقة اليدوية عبر المتصفح**

1. افتح الموقع الذي تريد اختباره.
2. اضغط على **F12** لفتح أدوات المطور.
3. انتقل إلى تبويب **Network**، ثم **Fetch/XHR**.
4. قم بتحديث الصفحة وانتبه لأي طلب يبدأ بـ **/api/**.
5. قم بالنقر على الطلبات لترى البيانات التي يتم إرسالها واستقبالها.
6. جرب تغيير البيانات المُرسلة لترى كيف يستجيب السيرفر (تحليل سلوك API).

---

### **🔹 الطريقة التلقائية عبر الأدوات**

📌 **باستخدام Burp Suite**

1. افتح Burp Suite وقم بإعداد **Proxy** ليعترض حركة المرور بين المتصفح والسيرفر.
2. قم بتشغيل **Crawling و Spidering**.
3. انتقل إلى **Target > Site Map** وابحث عن مسارات تبدأ بـ `/api/`.
4. جرب إرسال طلبات مختلفة يدويًا عبر **Burp Repeater** لاختبار استجابات السيرفر.

📌 **باستخدام Gobuster أو Dirb (Linux Terminal)**

1. استخدم الأمر التالي لمحاولة اكتشاف مسارات API المخفية:
    
    ```bash
    gobuster dir -u https://example.com -w /usr/share/wordlists/dirb/common.txt -x php,html,js
    ```
    
2. ستظهر لك قائمة بالمسارات المخفية التي يمكن أن تحتوي على API Endpoints.

---

## **💡 الخلاصة النهائية**

✅ **Crawling**: تتبع الروابط لاكتشاف الصفحات.  
✅ **Spidering**: زحف أكثر ذكاءً، يتفاعل مع الموقع للوصول إلى مزيد من الصفحات المخفية.  
✅ **Identifying API Endpoints**: إيجاد مسارات API لفهم كيفية عمل الموقع واستغلالها في الاختبار.  
✅ **أفضل طرق الاكتشاف**:

- **يدويًا** عبر **Network Requests** في المتصفح.
- **تلقائيًا** عبر **Burp Suite، Gobuster، Dirb**.

🔹 **الهدف النهائي؟**  
معرفة كيف يعمل الموقع، واكتشاف نقاط الضعف التي يمكن استغلالها في اختبار الاختراق.

🔥 **الآن، جرب بنفسك! 😉**