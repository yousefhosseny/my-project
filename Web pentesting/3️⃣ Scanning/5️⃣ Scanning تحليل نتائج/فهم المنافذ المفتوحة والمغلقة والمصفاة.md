## 🔍 **فهم المنافذ المفتوحة والمغلقة والمصفاة (Scanning) وتحليل النتائج بعمق**

### 💡 **ما هي المنافذ (Ports)؟**

المنافذ هي نقاط اتصال بين الأجهزة في الشبكة، وتُستخدم لإرسال واستقبال البيانات بين الأجهزة والخدمات المختلفة. يتم تحديد كل منفذ برقم معين (0-65535)، وتنقسم المنافذ إلى ثلاثة أنواع رئيسية:

| الفئة               | نطاق المنافذ | الاستخدام                                                    |
| ------------------- | ------------ | ------------------------------------------------------------ |
| المنافذ الشائعة     | 0-1023       | تستخدمها الخدمات المعروفة مثل HTTP (80) وSSH (22) وDNS (53). |
| المنافذ المسجلة     | 1024-49151   | تُستخدم للتطبيقات الخاصة مثل الألعاب والبرامج.               |
| المنافذ الديناميكية | 49152-65535  | تُستخدم مؤقتًا لجلسات الاتصال.                               |

📌 **الخلاصة:** المنافذ هي بوابات الاتصال بين الخدمات، وكل منفذ له رقم محدد. بعضها معروف ومخصص، والبعض الآخر يُستخدم حسب الحاجة.

---

## 🛠️ **أنواع المنافذ عند الفحص**

### 1️⃣ **المنافذ المفتوحة (Open Ports) 🔓**

🔹 هذه المنافذ تعمل عليها خدمات نشطة وتستجيب للطلبات.  
🔹 يمكن أن تكون **نقطة دخول للاختراق** إذا لم تكن محمية جيدًا.  
🔹 تكشف للمهاجم أن هناك خدمة تعمل على هذا المنفذ ويمكن استهدافها.

📌 **الخلاصة:** المنافذ المفتوحة تعني أن هناك خدمة نشطة، مما قد يشكل خطرًا إذا لم يتم تأمينها جيدًا.

---

### 2️⃣ **المنافذ المغلقة (Closed Ports) 🔒**

🔹 هذه المنافذ ليست قيد الاستخدام، لكن الجهاز لا يزال يستجيب للاستفسارات عنها.  
🔹 تكشف أن الجهاز نشط لكنه لا يشغّل خدمة على هذا المنفذ.  
🔹 لا تمثل تهديدًا مباشرًا، لكنها قد تدل على أن الجهاز متصل بالشبكة.

📌 **الخلاصة:** المنافذ المغلقة لا تشغل أي خدمة ولكن يمكن أن تساعد في التعرف على الجهاز.

---

### 3️⃣ **المنافذ المصفاة (Filtered Ports) 🛑**

🔹 الجدار الناري أو جهاز الأمان يمنع الوصول إلى هذه المنافذ.  
🔹 لا يرسل الجهاز أي استجابة عند الفحص، مما يجعل اكتشافه صعبًا.  
🔹 تستخدم في الشبكات الآمنة لمنع هجمات الفحص.

📌 **الخلاصة:** المنافذ المصفاة محمية بجدار ناري، مما يجعل اكتشاف الخدمات أصعب.

---

## 🔍 **كيف نفحص المنافذ باستخدام [[Nmap]]؟**

### ✅ **1️⃣ فحص سريع للمنافذ الشائعة**

```bash
nmap -F target.com
```

🔹 يفحص المنافذ الأكثر استخدامًا بسرعة.

📌 **الخلاصة:** هذا الأمر يعطي نظرة عامة سريعة على المنافذ المهمة.

---

### ✅ **2️⃣ فحص جميع المنافذ (0-65535)**

```bash
nmap -p- target.com
```

🔹 يفحص كل المنافذ على الجهاز.

📌 **الخلاصة:** هذا الفحص شامل ويكشف أي منفذ مفتوح.

---

### ✅ **3️⃣ تحديد الخدمات وإصداراتها**

```bash
nmap -sV target.com
```

🔹 `-sV` يحدد إصدار الخدمة التي تعمل على كل منفذ.

📌 **الخلاصة:** يساعد في معرفة الخدمات التي يمكن استغلالها.

---

### ✅ **4️⃣ فحص عميق وتحديد نظام التشغيل**

```bash
nmap -A target.com
```

🔹 `-A` يجمع معلومات شاملة عن الهدف، بما في ذلك نظام التشغيل والخدمات.

📌 **الخلاصة:** هذا الفحص يعطي تقريرًا متكاملاً عن الجهاز المستهدف.

---

### ✅ **5️⃣ فحص التخفي لتجاوز الجدران النارية**

```bash
nmap -sS -Pn target.com
```

🔹 `-sS` يقوم بفحص SYN (خفي).  
🔹 `-Pn` يتخطى فحص الأجهزة النشطة، مما يساعد على تجنب الاكتشاف.

📌 **الخلاصة:** هذا الفحص يساعد في تجنب كشف الفاحص أثناء الاختراق.

---

## 🔥 **خطوات عملية لفحص المنافذ واكتشاف الثغرات**

### ✅ **1️⃣ فحص الهدف ومعرفة المنافذ المفتوحة**

```bash
nmap -p- -sV -O target.com
```

🔹 تحديد جميع المنافذ المفتوحة ومعرفة نظام التشغيل والخدمات.

---

### ✅ **2️⃣ البحث عن الثغرات في الخدمات المفتوحة**

📌 بعد الحصول على قائمة بالخدمات المفتوحة، استخدم:

```bash
searchsploit service_name version
```

🔹 مثال:

```bash
searchsploit OpenSSH 7.2
```

🔹 يبحث عن الثغرات المعروفة لهذه الخدمة.

---

### ✅ **3️⃣ استخدام [[Metasploit]] لفحص الثغرات**

📌 بعد تحديد المنفذ والخدمة، يمكنك تشغيل **Metasploit**:

```bash
msfconsole
use auxiliary/scanner/portscan/tcp
set RHOSTS target.com
run
```

🔹 يفحص المنافذ ويعطي تقريرًا عن الخدمات المحتملة لاستغلالها.

---

### ✅ **4️⃣ فحص الشبكة الداخلية لمعرفة الأجهزة النشطة**

```bash
nmap -sn 192.168.1.0/24
```

🔹 يكتشف جميع الأجهزة المتصلة بالشبكة المحلية.

---

## 🎯 **📌 الخلاصة النهائية**

📌 فحص المنافذ يساعد في معرفة الخدمات النشطة على الجهاز.  
📌 المنافذ المفتوحة تشكل خطرًا إذا لم تكن مؤمنة جيدًا.  
📌 الجدران النارية تحجب بعض المنافذ وتمنع الفحص.  
📌 أدوات مثل **Nmap وMetasploit** تساعد في جمع المعلومات حول الأهداف واستغلال الثغرات.

🚀 **هل تريد تطبيق عملي خطوة بخطوة؟** 😃